archive: true
language: java
jdk:
  - oraclejdk8

build:
  pre_ci_boot:
    image_name: menny/android_ndk
    image_tag: latest
    pull: true
  env:
    global:
    - secure: "ov1WiH9dO44fWaEFC/D/Tsm+FuO/ByL/p2syGP3fN0FVR85TSw2XjvwcF2KGl8cW4oWfFY1roLPLn5Nsg5vL7OwwBpJFdcOAxLZdOijaSYVVnDdzUibZyiQLUHHlxF7GC1DnYdvzoCxeOemAWF13vTKpGL15j9MAMUZh9xlUVxJPdzJ1USw7yeT0cm+5zseLx3ED56uZAHlg3pqA0tzI+zoewdHHY/WUv4mRDeN5Wesjaq/WGxRc19qzLSanR4cN20ZzVuaaOQBzpCYINpaGcdA998/JJEnmcYisqYWsdtu0ujP6jrYN6ta4AbcbdykGGAYeKuqNhBNTVc/osMYUcGZtfeRaitOSX4yECq+onS2/zF7VHgJpComTVLnc40Qwsn1vVFtEEd5sLXlM+3SD7dcc4rVLxKwR+/HMKG69856fVzs1kHgkLtgOFYSi7JTRNaLtKR1T6LmRUq5OTnZDOFcyM7Ga7U2/WXxyEwQrTpDkZcXnAqTdUvYS3bbOgXsSeRDkfzffvNiZiJe/YaAnXamMSdqnn3ErqruzdQmoDydgOMidyxPc+RZadhDRHIlHPsboil/TCFWA5+02cJD5yvRjexEI08zaddjJhSm0nxuxg4FRpr0GdJrOhOG7+gDpjuD0DxY2Qt/bH82x/gp4kzEJz349WX22AE2OUegAk6M="
  ci:
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - ./download_signing_files.sh
    - ./gradlew clean testDebug checkDebug
    - ./gradlew jacocoTestReport
    - cp -r build/test-results/* shippable/testresults/
    - cp -r build/jacoco/* shippable/codecoverage/
    - cp -r build/reports/jacoco/jacocoTestReport/* shippable/codecoverage/
    - ./gradlew clean assembleCanary publishCanary -PenableApkPublish
    - cp build/outputs/apk/* shippable/
    - ./gradlew clean assembleRelease assembleDebug
    - cp build/outputs/apk/* shippable/
integrations:
    notifications:
        - integrationName: email
          type: email
          recipients:
            - mennyed@gmail.com
          on_success: always
          on_failure: always
